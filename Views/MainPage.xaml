<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="SimonApp1.Views.MainPage"
             Title="Simon Says"
             BackgroundColor="{AppThemeBinding Light=#F6F7F9, Dark=#0B0B0C}">

    <Grid>
        <!-- Основной контент -->
        <Grid RowDefinitions="Auto,*,Auto" Padding="18">
            <!-- Заголовок -->
            <Label Text="Simon Says" FontSize="28" FontAttributes="Bold" 
                   HorizontalOptions="Center" Margin="0,6,0,6"
                   TextColor="{AppThemeBinding Light=Black, Dark=White}"/>

            <!-- Игровая панель -->
            <Grid Grid.Row="1" HorizontalOptions="Center" VerticalOptions="Center">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <Grid ColumnSpacing="18" RowSpacing="18">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="200"/>
                        <RowDefinition Height="200"/>
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="200"/>
                        <ColumnDefinition Width="200"/>
                    </Grid.ColumnDefinitions>

                    <!-- Зеленая кнопка -->
                    <Border Grid.Row="0" Grid.Column="0"
                            StrokeShape="RoundRectangle 20"
                            BackgroundColor="{Binding GreenColor}"
                            Padding="6"
                            Shadow="10,10,5,Black">
                        <Button x:Name="GreenButton" Style="{StaticResource RoundButton}" Clicked="OnColorClicked"/>
                    </Border>

                    <!-- Красная кнопка -->
                    <Border Grid.Row="0" Grid.Column="1"
                            StrokeShape="RoundRectangle 20"
                            BackgroundColor="{Binding RedColor}"
                            Padding="6"
                            Shadow="10,10,5,Black">
                        <Button x:Name="RedButton" Style="{StaticResource RoundButton}" Clicked="OnColorClicked"/>
                    </Border>

                    <!-- Желтая кнопка -->
                    <Border Grid.Row="1" Grid.Column="0"
                            StrokeShape="RoundRectangle 20"
                            BackgroundColor="{Binding YellowColor}"
                            Padding="6"
                            Shadow="10,10,5,Black">
                        <Button x:Name="YellowButton" Style="{StaticResource RoundButton}" Clicked="OnColorClicked"/>
                    </Border>

                    <!-- Синяя кнопка -->
                    <Border Grid.Row="1" Grid.Column="1"
                            StrokeShape="RoundRectangle 20"
                            BackgroundColor="{Binding BlueColor}"
                            Padding="6"
                            Shadow="10,10,5,Black">
                        <Button x:Name="BlueButton" Style="{StaticResource RoundButton}" Clicked="OnColorClicked"/>
                    </Border>
                </Grid>
            </Grid>

            <!-- Панель снизу -->
            <StackLayout Grid.Row="2" Orientation="Horizontal" HorizontalOptions="Center" Spacing="14" Margin="0,12,0,0">
                <Label Text="Имя:" VerticalOptions="Center" TextColor="{AppThemeBinding Light=Black, Dark=White}"/>
                <Entry x:Name="NameEntry" WidthRequest="150" Placeholder="Player"/>
                <Button Text="Начать" x:Name="StartButton" Clicked="OnStartClicked"/>
                <Button Text="Настройки" Clicked="OnSettingsClicked"/>
            </StackLayout>
        </Grid>

        <!-- Оверлей с результатами -->
        <Grid x:Name="Overlay" BackgroundColor="#C0000000" IsVisible="False">
            <Border VerticalOptions="Center"
                    HorizontalOptions="Center"
                    Padding="20"
                    StrokeShape="RoundRectangle 12"
                    BackgroundColor="{AppThemeBinding Light=White, Dark=#111111}"
                    WidthRequest="320"
                    Shadow="10,10,5,Black">
                <StackLayout Spacing="12">
                    <Label x:Name="ResultTitle" Text="Game Over" FontSize="22" FontAttributes="Bold" HorizontalOptions="Center" 
                           TextColor="{AppThemeBinding Light=Black, Dark=White}"/>
                    <Label x:Name="ResultText" Text="Ты набрал 5 очков" HorizontalOptions="Center" 
                           TextColor="{AppThemeBinding Light=Black, Dark=White}"/>
                    <StackLayout Orientation="Horizontal" HorizontalOptions="Center" Spacing="12">
                        <Button Text="Сохранить" Clicked="OnSaveScoreClicked"/>
                        <Button Text="Играть снова" Clicked="OnRestartClicked"/>
                    </StackLayout>
                </StackLayout>
            </Border>
        </Grid>
    </Grid>
</ContentPage>
